{% extends 'base.html' %}
{% load widget_tweaks %}

{% block title %}Perfil{% endblock title %}

{% block content %}

    <h2> Meu Perfil</h2>

    <section class="mt-3">

        <form class="row" method="post" enctype="multipart/form-data">
            {% csrf_token %}

            <div class="col-sm-12 col-md-12 mb-3">
                <label class="form-label">Nome Completo:</label>
                <div class="input-group">
                    <button type="button" class="btn btn-secondary" 
                    data-bs-toggle="popover"
                    data-bs-html="true"
                    title="Campo Protegido"
                    data-bs-content="Este campo s贸 pode ser alterado pelo administrador do sistema."
                    style="cursor: pointer;"
                    data-bs-trigger="focus"
                    tabindex="0"
                    ><i class="bi bi-shield-lock"></i></button>
                    <input type="text" class="form-control" value="{{ request.user.get_full_name }}" readonly>
                </div>
            </div>

            <div class="col-sm-12 col-md-6 mb-3">
                <label for="{{ user_form.username.id_for_label }}" class="form-label">
                    {{ user_form.username.label }}:
                    {% if user_form.username.field.required %}
                        <span class="text-danger">*</span>
                    {% endif %}
                </label>
                {% render_field user_form.username class="form-control" %}
                {% for error in user_form.username.errors %}
                    <span class="text-danger">{{ error }}</span>
                {% endfor %}
            </div>

            <div class="col-sm-12 col-md-6 mb-3">
                <label for="{{ user_form.email.id_for_label }}" class="form-label">
                    {{ user_form.email.label }}:
                    {% if user_form.email.field.required %}
                        <span class="text-danger">*</span>
                    {% endif %}
                </label>
                {% render_field user_form.email class="form-control" %}
                {% for error in user_form.email.errors %}
                    <span class="text-danger">{{ error }}</span>
                {% endfor %}
            </div>

            <div class="col-sm-6 col-md-3 mb-3">
                <label for="{{ form.registration.id_for_label }}" class="form-label">{{ form.registration.label }}: {% if form.registration.field.required %}<span class="text-danger">*</span>{% endif %}</label>
                {% render_field form.registration class="form-control" %}
                {% for error in form.registration.errors %}
                    <span class="text-danger">{{ error }}</span>
                {% endfor %}
                <div class="invalid-feedback">
                    Este campo 茅 obrigat贸rio
                </div>
            </div>

            <div class="col-sm-6 col-md-3 mb-3">
                <label for="{{ form.admission_date.id_for_label }}" class="form-label">{{ form.admission_date.label }}: {% if form.admission_date.field.required %}<span class="text-danger">*</span>{% endif %}</label>
                {% render_field form.admission_date class="form-control" %}
                {% for error in form.admission_date.errors %}
                    <span class="text-danger">{{ error }}</span>
                {% endfor %}
                <div class="invalid-feedback">
                    Este campo 茅 obrigat贸rio
                </div>
            </div>

            <div class="col-sm-12 col-md-6 mb-3">
                <label for="{{ form.function.id_for_label }}" class="form-label">{{ form.function.label }}: {% if form.function.field.required %}<span class="text-danger">*</span>{% endif %}</label>
                {% render_field form.function class="form-select" %}
                {% for error in form.function.errors %}
                    <span class="text-danger">{{ error }}</span>
                {% endfor %}
                <div class="invalid-feedback">
                    Este campo 茅 obrigat贸rio
                </div>
            </div>

            <div class="col-sm-12 col-md-8 mb-3">
                <label for="{{ form.public.id_for_label }}" class="form-label">
                    {{ form.public.label }}:
                    {% if form.public.field.required %}
                        <span class="text-danger">*</span>
                    {% endif %}
                </label>
                <div class="form-check form-switch">
                    {% render_field form.public class="form-check-input" %}
                    <label class="form-check-label" for="{{ form.public.id_for_label }}">
                        {% if form.public.value %}
                            P煤blico
                        {% else %}
                            Privado
                        {% endif %}
                    </label>
                </div>
                {% for error in form.public.errors %}
                    <span class="text-danger">{{ error }}</span>
                {% endfor %}
            </div>

            <div class="col-12">
                <div class="g-2">
                    <button type="submit" class="btn btn-success">
                        <i class="bi bi-check-lg"></i> Salvar
                    </button>
                    <a href="{% url 'home' %}" class="btn btn-secondary">
                        <i class="bi bi-arrow-return-left"></i> Voltar
                    </a>
                </div>
            </div>
        </form>

    </section>

{% endblock content %}
